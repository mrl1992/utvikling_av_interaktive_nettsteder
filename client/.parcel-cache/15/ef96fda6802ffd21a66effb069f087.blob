"use strict";
var helpers = require("../../node_modules/@parcel/transformer-react-refresh-wrap/lib/helpers/helpers.js");
var prevRefreshReg = window.$RefreshReg$;
var prevRefreshSig = window.$RefreshSig$;
helpers.prelude(module);
try {
  var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports["default"] = void 0;
  var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
  var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
  var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
  var _react = require("react");
  var _reactRouterDom = require("react-router-dom");
  var _styledComponents = _interopRequireDefault(require("styled-components"));
  var _framerMotion = require("framer-motion");
  var _logoService = require("../utils/logoService");
  var _navService = require("../utils/navService");
  var _DetectOutsideClick = require("./DetectOutsideClick");
  var _imgUrl = _interopRequireDefault(require("../utils/imgUrl"));
  var _jsxRuntime = require("react/jsx-runtime");
  var _s = $RefreshSig$();
  var StyledContainer = _styledComponents["default"].div.withConfig({
    displayName: "Navigation__StyledContainer",
    componentId: "msyuah-0"
  })(["position:relative;background:", ";display:flex;justify-content:center;align-items:center;z-index:99;"], function (_ref) {
    var theme = _ref.theme;
    return theme.colors.black;
  });
  _c = StyledContainer;
  var StyledButton = _styledComponents["default"].button.withConfig({
    displayName: "Navigation__StyledButton",
    componentId: "msyuah-1"
  })(["background:", ";color:", ";cursor:pointer;display:flex;justify-content:space-between;align-items:center;border:none;transition:solid 0.5s ease;span{vertical-align:middle;font-size:1.1rem;margin:0.6rem;:hover{color:", ";}}"], function (_ref2) {
    var theme = _ref2.theme;
    return theme.colors.black;
  }, function (_ref3) {
    var theme = _ref3.theme;
    return theme.colors.white;
  }, function (_ref4) {
    var theme = _ref4.theme;
    return theme.colors.teal;
  });
  _c2 = StyledButton;
  var StyledMenu = _styledComponents["default"].div.withConfig({
    displayName: "Navigation__StyledMenu",
    componentId: "msyuah-2"
  })(["background:", ";border-radius:3px;position:absolute;top:100px;right:0;width:15rem;text-align:center;box-shadow:20px 20px 8px rgba(0,0,0,0.3);opacity:0;visibility:hidden;transform:translateY(-30px);transition:opacity 0.4s ease,transform 0.4s ease,visibility 0.4s;&.active{opacity:1;visibility:visible;transform:translateY(0);}ul{list-style:none;padding:0;margin:0;}li{border-bottom:1px solid #dddddd;}li a{text-decoration:none;font-size:1.2rem;color:", ";padding:1rem 1.2rem;display:block;:hover{color:", ";}}"], function (_ref5) {
    var theme = _ref5.theme;
    return theme.colors.white;
  }, function (_ref6) {
    var theme = _ref6.theme;
    return theme.colors.black;
  }, function (_ref7) {
    var theme = _ref7.theme;
    return theme.colors.teal;
  });
  _c3 = StyledMenu;
  var StyledNavSection = _styledComponents["default"].section.withConfig({
    displayName: "Navigation__StyledNavSection",
    componentId: "msyuah-3"
  })(["display:flex;padding:0;flex-direction:row;justify-content:left;"]);
  _c4 = StyledNavSection;
  var StyledNav = _styledComponents["default"].nav.withConfig({
    displayName: "Navigation__StyledNav",
    componentId: "msyuah-4"
  })(["background:linear-gradient( 220deg,", " 0%,", " 100% );display:grid;grid-template-columns:0.1fr auto;padding:0;height:100px;margin-bottom:10px;"], function (_ref8) {
    var theme = _ref8.theme;
    return theme.colors.grey;
  }, function (_ref9) {
    var theme = _ref9.theme;
    return theme.colors.black;
  });
  _c5 = StyledNav;
  var StyledUl = _styledComponents["default"].ul.withConfig({
    displayName: "Navigation__StyledUl",
    componentId: "msyuah-5"
  })(["display:flex;margin:0;padding:0;list-style:none;"]);
  _c6 = StyledUl;
  var StyledLi = _styledComponents["default"].li.withConfig({
    displayName: "Navigation__StyledLi",
    componentId: "msyuah-6"
  })(["color:", ";font-size:1.1rem;padding:0.6rem;margin:auto;text-decoration:none;& a{color:inherit;text-decoration:none;padding:0 1rem;&:hover{color:", ";}&.active{text-decoration:underline;}}"], function (_ref10) {
    var theme = _ref10.theme;
    return theme.colors.white;
  }, function (_ref11) {
    var theme = _ref11.theme;
    return theme.colors.teal;
  });
  _c7 = StyledLi;
  var StyledP = _styledComponents["default"].p.withConfig({
    displayName: "Navigation__StyledP",
    componentId: "msyuah-7"
  })(["color:", ";font-size:1.1rem;text-align:center;"], function (_ref12) {
    var theme = _ref12.theme;
    return theme.colors.white;
  });
  _c8 = StyledP;
  var StyledLogoSection = (0, _styledComponents["default"])(_framerMotion.motion.section).withConfig({
    displayName: "Navigation__StyledLogoSection",
    componentId: "msyuah-8"
  })(["display:flex;align-items:center;padding:0 0 0 20px;margin-top:10px;max-width:200px;min-width:180px;height:80px;img{width:100%;align-items:center;}"]);
  _c9 = StyledLogoSection;
  var Navigation = function Navigation() {
    _s();
    var _logoData$, _logoData$2, _data$link, _data$link2, _data$link3, _data$link4;
    var _useState = (0, _react.useState)(null), _useState2 = (0, _slicedToArray2["default"])(_useState, 2), data = _useState2[0], setData = _useState2[1];
    var _useState3 = (0, _react.useState)(null), _useState4 = (0, _slicedToArray2["default"])(_useState3, 2), loading = _useState4[0], setLoading = _useState4[1];
    var _useState5 = (0, _react.useState)(null), _useState6 = (0, _slicedToArray2["default"])(_useState5, 2), error = _useState6[0], setError = _useState6[1];
    /*dropdown-meny*/
    var dropdownRef = (0, _react.useRef)(null);
    var _detectOutsideClick = (0, _DetectOutsideClick.detectOutsideClick)(dropdownRef, false), _detectOutsideClick2 = (0, _slicedToArray2["default"])(_detectOutsideClick, 2), isActive = _detectOutsideClick2[0], setIsActive = _detectOutsideClick2[1];
    var onClick = function onClick() {
      return setIsActive(!isActive);
    };
    /*logo fra sanity*/
    var _useState7 = (0, _react.useState)(false), _useState8 = (0, _slicedToArray2["default"])(_useState7, 2), logoLoading = _useState8[0], setLogoLoading = _useState8[1];
    var _useState9 = (0, _react.useState)([]), _useState10 = (0, _slicedToArray2["default"])(_useState9, 2), logoData = _useState10[0], setLogoData = _useState10[1];
    var _useState11 = (0, _react.useState)(false), _useState12 = (0, _slicedToArray2["default"])(_useState11, 2), logoError = _useState12[0], setLogoError = _useState12[1];
    /*henter nav-data fra sanity*/
    (0, _react.useEffect)(function () {
      var fetchDataAsync = /*#__PURE__*/(function () {
        var _ref13 = (0, _asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee() {
          var navigation;
          return _regenerator["default"].wrap(function _callee$(_context) {
            while (1) {
              switch (_context.prev = _context.next) {
                case 0:
                  setLoading(true);
                  _context.prev = 1;
                  _context.next = 4;
                  return (0, _navService.getNav)("Header");
                case 4:
                  navigation = _context.sent;
                  setData(navigation);
                  _context.next = 11;
                  break;
                case 8:
                  _context.prev = 8;
                  _context.t0 = _context["catch"](1);
                  setError(_context.t0);
                case 11:
                  _context.prev = 11;
                  setLoading(false);
                  return _context.finish(11);
                case 14:
                case "end":
                  return _context.stop();
              }
            }
          }, _callee, null, [[1, 8, 11, 14]]);
        }));
        return function fetchDataAsync() {
          return _ref13.apply(this, arguments);
        };
      })();
      fetchDataAsync();
    }, []);
    /*henter logo fra Sanity*/
    (0, _react.useEffect)(function () {
      var getLogoData = /*#__PURE__*/(function () {
        var _ref14 = (0, _asyncToGenerator2["default"])(/*#__PURE__*/_regenerator["default"].mark(function _callee2() {
          var iconData;
          return _regenerator["default"].wrap(function _callee2$(_context2) {
            while (1) {
              switch (_context2.prev = _context2.next) {
                case 0:
                  setLogoLoading(true);
                  _context2.prev = 1;
                  _context2.next = 4;
                  return (0, _logoService.getLogo)();
                case 4:
                  iconData = _context2.sent;
                  setLogoData(iconData);
                  setLogoLoading(false);
                  _context2.next = 12;
                  break;
                case 9:
                  _context2.prev = 9;
                  _context2.t0 = _context2["catch"](1);
                  setLogoError(_context2.t0);
                case 12:
                case "end":
                  return _context2.stop();
              }
            }
          }, _callee2, null, [[1, 9]]);
        }));
        return function getLogoData() {
          return _ref14.apply(this, arguments);
        };
      })();
      setLogoError(null);
      getLogoData();
    }, []);
    return (
      /*#__PURE__*/(0, _jsxRuntime.jsxs)(StyledNav, {
        children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(StyledLogoSection, {
          initial: {
            scale: 1,
            rotation: 0,
            opacity: 0
          },
          animate: {
            scale: 1,
            rotation: 0,
            opacity: 1
          },
          transition: {
            duration: 4
          },
          children: /*#__PURE__*/(0, _jsxRuntime.jsxs)(_reactRouterDom.NavLink, {
            to: "/",
            children: [logoLoading ? /*#__PURE__*/(0, _jsxRuntime.jsx)("p", {
              children: "Loading.."
            }) : null, logoError ? /*#__PURE__*/(0, _jsxRuntime.jsx)("p", {
              children: error
            }) : null, /*#__PURE__*/(0, _jsxRuntime.jsx)("img", {
              src: (0, _imgUrl["default"])((_logoData$ = logoData[0]) === null || _logoData$ === void 0 ? void 0 : _logoData$.image.url).format("webp").url(),
              alt: (_logoData$2 = logoData[0]) === null || _logoData$2 === void 0 ? void 0 : _logoData$2.alt
            })]
          })
        }), /*#__PURE__*/(0, _jsxRuntime.jsxs)(StyledNavSection, {
          children: [error ? /*#__PURE__*/(0, _jsxRuntime.jsxs)(StyledP, {
            children: [error, "- theres a bug in the system"]
          }) : null, loading ? /*#__PURE__*/(0, _jsxRuntime.jsx)(StyledP, {
            children: "Loading - please wait"
          }) : null, /*#__PURE__*/(0, _jsxRuntime.jsxs)(StyledUl, {
            children: [(data === null || data === void 0 ? void 0 : (_data$link = data.link) === null || _data$link === void 0 ? void 0 : _data$link.length) > 0 && (data === null || data === void 0 ? void 0 : (_data$link2 = data.link) === null || _data$link2 === void 0 ? void 0 : _data$link2.slice(0, 2).map(function (link) {
              return (
                /*#__PURE__*/(0, _jsxRuntime.jsx)(StyledLi, {
                  children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.NavLink, {
                    exact: true,
                    to: ("/").concat(link.href),
                    activeClassName: "active",
                    children: link.name
                  })
                }, link._key)
              );
            })), /*#__PURE__*/(0, _jsxRuntime.jsxs)(StyledContainer, {
              children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(StyledButton, {
                onClick: onClick,
                children: /*#__PURE__*/(0, _jsxRuntime.jsx)("span", {
                  children: "Mer +"
                })
              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(StyledMenu, {
                ref: dropdownRef,
                className: ("menu ").concat(isActive ? "active" : "inactive"),
                children: /*#__PURE__*/(0, _jsxRuntime.jsxs)("ul", {
                  children: [loading ? /*#__PURE__*/(0, _jsxRuntime.jsx)("p", {
                    children: "Loading"
                  }) : null, (data === null || data === void 0 ? void 0 : (_data$link3 = data.link) === null || _data$link3 === void 0 ? void 0 : _data$link3.length) > 0 && (data === null || data === void 0 ? void 0 : (_data$link4 = data.link) === null || _data$link4 === void 0 ? void 0 : _data$link4.slice(2).map(function (link) {
                    return (
                      /*#__PURE__*/(0, _jsxRuntime.jsx)("li", {
                        children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.NavLink, {
                          exact: true,
                          to: ("/").concat(link.href),
                          activeClassName: "active",
                          children: link.name
                        })
                      }, link._key)
                    );
                  }))]
                })
              })]
            })]
          })]
        })]
      })
    );
  };
  _s(Navigation, "/9YLy8Mm3l1Ilp8mdVtdbN4qN4o=");
  _c10 = Navigation;
  var _default = Navigation;
  exports["default"] = _default;
  var _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;
  $RefreshReg$(_c, "StyledContainer");
  $RefreshReg$(_c2, "StyledButton");
  $RefreshReg$(_c3, "StyledMenu");
  $RefreshReg$(_c4, "StyledNavSection");
  $RefreshReg$(_c5, "StyledNav");
  $RefreshReg$(_c6, "StyledUl");
  $RefreshReg$(_c7, "StyledLi");
  $RefreshReg$(_c8, "StyledP");
  $RefreshReg$(_c9, "StyledLogoSection");
  $RefreshReg$(_c10, "Navigation");
  helpers.postlude(module);
} finally {
  window.$RefreshReg$ = prevRefreshReg;
  window.$RefreshSig$ = prevRefreshSig;
}
